package com.ufms.mediadorpedagogico.presentation.homework.details

import android.content.Context
import android.content.Intent
import android.graphics.BitmapFactory
import android.os.Bundle
import android.util.Base64
import androidx.databinding.DataBindingUtil
import androidx.recyclerview.widget.LinearLayoutManager
import com.ufms.mediadorpedagogico.R
import com.ufms.mediadorpedagogico.databinding.ActivityHomeworkDetailsBinding
import com.ufms.mediadorpedagogico.domain.entity.Homework
import com.ufms.mediadorpedagogico.presentation.util.bindingadapter.DividerItemDecorator
import com.ufms.mediadorpedagogico.presentation.util.extensions.drawableCompat
import com.ufms.mediadorpedagogico.presentation.util.extensions.observeEvent
import com.ufms.mediadorpedagogico.presentation.util.extensions.setupCustomizedToolbar
import com.ufms.mediadorpedagogico.presentation.util.extensions.shortToast
import com.ufms.mediadorpedagogico.presentation.util.structure.base.BaseActivity
import com.ufms.mediadorpedagogico.presentation.util.structure.base.BaseViewModel
import org.koin.android.viewmodel.ext.android.viewModel
import org.koin.core.parameter.parametersOf
import java.lang.Exception

class HomeworkDetailsActivity : BaseActivity() {

    override val baseViewModel: BaseViewModel get() = viewModel

    private lateinit var binding: ActivityHomeworkDetailsBinding
    private val viewModel: HomeworkDetailsViewModel by viewModel { parametersOf(homeworkDetails) }
    lateinit var homeworkDetailsAdapter: HomeworkDetailsAdapter

    private val homeworkDetails by lazy {
        (intent.extras?.getSerializable(HOMEWORK_KEY) as? Homework)
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        binding = DataBindingUtil.setContentView(this, R.layout.activity_homework_details)
        setupCustomizedToolbar(binding.toolbarCustomized, true, getString(R.string.activity_homework_label))
        lifecycle.addObserver(viewModel)
        setupAdapter()
        setupRecycler()
        super.onCreate(savedInstanceState)
    }

    override fun subscribeUi() {
        super.subscribeUi()
        with(viewModel) {
            homeworkContent.observeEvent(this@HomeworkDetailsActivity, ::onHomeworkDetailsReceived)
        }
    }

    private fun setupAdapter() {
        homeworkDetailsAdapter = HomeworkDetailsAdapter()
    }

    private fun setupRecycler() {
        with(binding.recyclerViewLink) {
            layoutManager = LinearLayoutManager(this@HomeworkDetailsActivity)
            adapter = homeworkDetailsAdapter
            drawableCompat(R.drawable.recycler_view_divider)?.run {
                addItemDecoration(DividerItemDecorator(this))
            }
        }
    }

    private fun onHomeworkDetailsReceived(homeworkDetails: Homework?) {
        homeworkDetails?.run {
            binding.homeworkDetails = this
            homeworkDetailsAdapter.setItems(homeworkLinks)
//            val base64 =
//                "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"
            imageBase64?.let {
                try {
                    val decodedString = Base64.decode(it, Base64.DEFAULT)
                    val decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.size)
                    binding.imageViewResource.setImageBitmap(decodedByte)
                } catch (e: Exception) {
                    shortToast(getString(R.string.activity_main_error_image_decode))
                }
            }
        }
    }

    companion object {
        const val HOMEWORK_KEY = "HOMEWORK"

        fun createIntent(context: Context, homework: Homework): Intent {
            return Intent(context, HomeworkDetailsActivity::class.java).putExtra(HOMEWORK_KEY, homework)
        }
    }
}